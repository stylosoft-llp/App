(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{813:function(e,t,n){"use strict";n.r(t);var r=n(568),l=n(510),o=n(219),d=n(124),c=n(594),m=n(524),_=n(566),h=n(218),f=n(765),v=n(527),w=n(509),x=(n(25),n(30),n(5),n(13),{props:{permissions:{default:null},allowNew:{default:!0},title:{default:"Assignee"},id:{default:null},name:{default:null},customer_detail:{default:null,required:!1}},data:function(){return{createDialog:!1,user:{},assignee:{},assignee_search:"",assignees:[],loadingAssignees:!1,show1:!1,registering:!1,emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],passwordRules:[function(e){return!!e||"Password is required"}]}},watch:{assignee_search:function(e){e&&e.length>2&&this.searchAssignees()}},methods:{addDialog:function(){"Customer"==this.permissions?this.$router.push("/app/customers/editor"):this.createDialog=!0},addUser:function(){var e=this,t=this.user;this.$axios.put("/auth/users",t).then((function(t){e.$toast.success(e.permissions+" Added Successfully!")}))},searchAssignees:function(){var e,t=this;(null===(e=this.assignee_search)||void 0===e?void 0:e.length)<=2||(this.loadingAssignees=!0,this.$axios.get("/auth/users/filter",{params:{name:this.assignee_search,is:this.permissions}}).then((function(e){var n=e.data;n.forEach((function(e){e.user_detail&&(e.name=e.name+" ("+e.user_detail.company_name+")")})),t.assignees=n,t.loadingAssignees=!1}),(function(e){t.loadingAssignees=!1})))}}}),k=n(26),component=Object(k.a)(x,(function(){var e=this,t=e._self._c;return t("div",[t("p",[e._v(e._s(e.title)+" "),t(c.a,{staticClass:"font-weight-medium",attrs:{label:""}},[e._v(e._s(e.name||"None")+" ")])],1),e._v(" "),e.customer_detail?t("div",[e.customer_detail.user_detail?t("div",[e._v("\n      "+e._s(e.customer_detail.user_detail.address_1)+" "+e._s(e.customer_detail.user_detail.address_2)),t("br"),e._v("\n      "+e._s(e.customer_detail.user_detail.city)+" "+e._s(e.customer_detail.user_detail.state)+" "+e._s(e.customer_detail.user_detail.country)+" "),t("br"),e._v(e._s(e.customer_detail.phone)+"\n    ")]):e._e()]):e._e(),e._v(" "),t("div",{staticClass:"d-flex flex-row",attrs:{dense:""}},[t(r.a,{staticClass:"mr-1",attrs:{dense:"",outlined:"",clearable:"",loading:e.loadingAssignees,"search-input":e.assignee_search,label:"Search "+e.title,"item-text":"name","return-object":"","prepend-inner-icon":"mdi-magnify",items:e.assignees},on:{focus:function(t){return e.searchAssignees()},input:function(t){t&&e.$emit("assignTo",t)},"update:searchInput":function(t){e.assignee_search=t},"update:search-input":function(t){e.assignee_search=t}},scopedSlots:e._u([{key:"item",fn:function(n){var r=n.item;return[t(v.a,[t(v.c,{staticStyle:{"white-space":"normal"}},[e._v("\n            "+e._s(r.name)+"\n          ")])],1),e._v(" "),t(f.a,[r.present?t(h.a,{attrs:{small:"",color:"green"}},[e._v("mdi-circle")]):e._e()],1)]}}])}),e._v(" "),e.allowNew?t(l.a,{staticClass:"ml-1",on:{click:function(t){return e.addDialog()}}},[t(h.a,{attrs:{left:""}},[e._v("mdi-plus")]),e._v("New")],1):e._e()],1),e._v(" "),t(_.a,{attrs:{"max-width":"600"},model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}},[t(o.a,[t(d.d,[e._v("Add New User")]),e._v(" "),t(m.a,[t(w.a,{attrs:{"prepend-inner-icon":"mdi-account-outline",outlined:"","validate-on-blur":"",dense:"",rules:[function(e){return!!e||"Full Name is Required"}],label:"Full Name *"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),e._v(" "),t(w.a,{attrs:{"prepend-inner-icon":"mdi-email-outline",outlined:"","validate-on-blur":"",dense:"",rules:e.emailRules,label:"E-mail *"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),e._v(" "),t(w.a,{attrs:{"prepend-inner-icon":"mdi-lock-outline",outlined:"","validate-on-blur":"",dense:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",label:"Password *",rules:e.passwordRules},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),e._v(" "),t(w.a,{attrs:{"prepend-inner-icon":"mdi-phone-outline",rules:[function(e){return!!e||"Phone No. is Required"}],outlined:"","validate-on-blur":"",hint:"Enter Phone No. without country code Eg. 8123456789",dense:"",counter:"",maxlength:"10",label:"Phone No. *"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}),e._v(" "),t(l.a,{attrs:{color:"primary",type:"submit",block:"",loading:e.registering},on:{click:function(t){return e.addUser()}}},[e._v("Register Now")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);