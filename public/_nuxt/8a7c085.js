(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{1077:function(e,t,r){"use strict";r.r(t);var n=r(20),c=(r(70),r(28),r(57),r(6),r(33),r(34),r(63),r(42),{props:["value","service_id"],data:function(){return{history:""}},mounted:function(){this.fetchHistory()},filters:{properForm:function(e){return e.replace(/_/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()}))}},methods:{fetchHistory:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/auth/services/".concat(e.service_id,"/history")).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=[],t.next=3,Promise.all(r.data.map(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=r.changes)||void 0===n||!n.assigned_to){t.next=7;break}return t.next=3,e.getAssignedUser(r.changes.assigned_to);case 3:o=t.sent,console.log(o),r.changes.assigned_to=o,c.push(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:e.history=c;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},getAssignedUser:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.get("/auth/users/".concat(e)).then((function(e){return e.data.name}),(function(t){return e}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()}}}),o=c,d=r(27),v=r(31),f=r.n(v),l=r(494),h=r(211),m=r(177),_=r(552),w=r(495),x=r(504),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{value:e.value,"max-width":"400px"},on:{input:function(t){return e.$emit("input",t)}}},[r("v-card",[r("v-card-title",[e._v("Activity History")]),e._v(" "),r("v-card-text",e._l(e.history,(function(t,n){return r("div",{key:n},[r("v-divider",{staticClass:"my-2"}),e._v(" "),r("p",{staticClass:"font-weight-bold"},[e._v(e._s(t.user&&t.user.name)+" ("+e._s(t.created_at)+")")]),e._v(" "),e._l(t.changes,(function(t,n){return r("tr",{key:n},[r("td",{staticClass:"font-weight-medium"},[e._v(e._s(e._f("properForm")(n))+"â€ƒ")]),e._v(" "),r("td",[e._v(e._s("expected_date"==n?e.$luxon(t):t))])])}))],2)})),0),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:function(t){return e.$emit("input",!1)}}},[e._v("Close")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{VBtn:l.a,VCard:h.a,VCardActions:m.a,VCardText:m.c,VCardTitle:m.d,VDialog:_.a,VDivider:w.a,VSpacer:x.a})}}]);